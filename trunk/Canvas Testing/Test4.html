<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Test 3</title>
    <script type="text/javascript">
        <!--
        // globally accessible variables
        var canvas = null;
        var context = null;

        // make sure our init function is called when the page is loaded
        window.onload = init;

        // implementation of our init function
        function init() {
            // get the canvas element
            canvas = document.getElementById('myCanvas');
            if (!canvas || !canvas.getContext) {
                return;
            }

            // get the canvas 2d context
            context = canvas.getContext('2d');
            if (!context) {
                return;
            }

            context.fillStyle = '#55bb55';
            context.strokeStyle = '#000000';
            // attach the mousedown, mousemove and mouseup event listeners
            canvas.addEventListener('mousedown', mouseEvent, false);
            canvas.addEventListener('mousemove', mouseEvent, false);
            canvas.addEventListener('mouseup',   mouseEvent, false);
            // start a new "thread"
        }

        var EventHandler = {
            dragging: false,
            mousedown: function(context, event) {
                context.beginPath();
                context.moveTo(event._x, event._y);
                this.dragging = true;
            },
            mousemove: function(context, event) {
                if (this.dragging) {
                    context.lineTo(event._x, event._y);
                    context.stroke();
                }
            },
            mouseup: function(context, event) {
                if (this.dragging) {
                    this.dragging = false;
                }
            }
        }

        function mouseEvent(event) {
            // TODO: Get these correct! Can we also deduce the canvas from within the event? (event.parent?)
            event._x = event.clientX - canvas.clientLeft;
            event._y = event.clientY - canvas.clientTop;

            if(EventHandler[event.type]) {
                EventHandler[event.type](context, event);
            }
        }

        // -->
    </script>
</head>
<body bgcolor="#f0f0f0">
This is a canvas<br/>
<canvas id="myCanvas" width="800" height="800" border="1">
    Your browser does not support HTML5 canvas!
</canvas>
</body>
</html>