% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margins=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options

% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%%% END Article customizations

\newcommand{\co}{\mathcal{K}}


%%% The "real" document content comes below...

\title{Simplified Physics for Spring-Connected Repellant Points}
\author{Lars Rönnbäck}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 

\begin{document}
\maketitle

\section{Formulas}

Let the force with which points repel each other be $$\vec{F}_r = \frac{\co_r}{d(p_1, p_2)}$$ where $\co_r$ is a constant and $d(p_1, p_2)$ is the distance between the points $p_1$ and $p_2$. Let the force with which spring-connected points attract each other be $$\vec{F}_a = \co_a d(p_1, p_2)^2$$ where $\co_a$ is a constant and $d(p_1, p_2)$ is the distance between the points $p_1$ and $p_2$. The acceleration of a point caused by an applied force can be derived from $$\vec{F} = m\vec{a}$$ and furthermore, the point will gain a velocity of $$\vec{v} = \vec{a}t$$ over the time period $t$. Combined these yield $$\vec{v} = \frac{\vec{F}t}{m}$$ for the velocity. If masses and time resolution can be chosen arbitrarily the formula will be in its simplest form for every point having $m = 1$ using the resolution $t = 1$. In this case the formula becomes: $$\vec{v} = \vec{F}$$

\noindent
If the distance between two points $p_1(x_1, y_1)$ and $p_2(x_2, y_2)$ is is expressed using the Euclidean metric 
$$d(p_1, p_2) = d((x_1, y_1), (x_2, y_2)) = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}$$
this gives the $x$ and $y$ components of $\vec{F}_r$ as
$$F^x_r = \frac{\co_r (x_2 - x_1)}{(x_2 - x_1)^2 + (y_2 - y_1)^2}$$
$$F^y_r = \frac{\co_r (y_2 - y_1)}{(x_2 - x_1)^2 + (y_2 - y_1)^2}$$

\noindent
If instead the distance is expressed using the taxi cab metric
$$d(p_1, p_2) = d((x_1, y_1), (x_2, y_2)) = |x_2 - x_1| + |y_2 - y_1|$$
the components of $\vec{F}$ becomes
$$F^x_r = \frac{\co_r (x_2 - x_1)}{(|x_2 - x_1| + |y_2 - y_1|)^2}$$
$$F^y_r = \frac{\co_r (y_2 - y_1)}{(|x_2 - x_1| + |y_2 - y_1|)^2}$$

\noindent
On the $n\pi/4, n = 0,2,4,6$ radians this distance coincides with the Euclidean distance, but for $n = 1,3,5,7$ we will measure a distance that is $\sqrt{2}$ times longer. On the former repelling forces will have an advantage and on the latter the attracting ones. This non-uniformity will slightly affect the layout, but the advantage of having simpler calculations makes up for this.


\subsection{Algorithms}
The following is a pseudo-code description of a verlet algorithm.

\begin{enumerate}
\item An array of the current locations and $x$ and $y$ component velocities of points are kept.
\item All distances are calculated and stored, resulting in $n \choose 2$ calculations, where $n$ is the number of points.
\item For every point determine which other points lie within the contribution radius and calculate the $x$ and $y$ components of the repelling forces.
\item For every point calculate the $x$ and $y$ components of the attracting forces caused by spring-connected points.
\item Adjust the $x$ and $y$ component velocities.
\item Calculate the new position of the point, given that the time step is 1 second.
\end{enumerate}



\end{document}
